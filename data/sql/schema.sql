CREATE TABLE categoria (nombre VARCHAR(150) NOT NULL, idtemporada INT NOT NULL, idcategoria INT AUTO_INCREMENT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX idtemporada_idx (idtemporada), PRIMARY KEY(idcategoria)) ENGINE = INNODB;
CREATE TABLE clasificacion (idequipo INT NOT NULL, idjornada INT NOT NULL, posicion INT DEFAULT '0', puntos INT DEFAULT '0', favor INT DEFAULT '0', contra INT DEFAULT '0', idcategoria INT NOT NULL, idclasificacion INT AUTO_INCREMENT, jugados INT DEFAULT '0', ganados INT DEFAULT '0', empatados INT DEFAULT '0', perdidos INT DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX idcategoria_idx (idcategoria), INDEX idequipo_idx (idequipo), INDEX idjornada_idx (idjornada), PRIMARY KEY(idclasificacion)) ENGINE = INNODB;
CREATE TABLE club (idclub INT AUTO_INCREMENT, nombre TEXT NOT NULL, fundacion BIGINT, campo TEXT, escudo TEXT, capacidad FLOAT(18, 2), sede TEXT, PRIMARY KEY(idclub)) ENGINE = INNODB;
CREATE TABLE comentario (idcomentario INT AUTO_INCREMENT, idnoticia INT NOT NULL, idusuario BIGINT NOT NULL, cuerpo TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX idnoticia_idx (idnoticia), PRIMARY KEY(idcomentario)) ENGINE = INNODB;
CREATE TABLE directivo (iddirectivo INT AUTO_INCREMENT, idpersona INT NOT NULL, cargo TEXT, antecesor TEXT, observaciones TEXT, INDEX idpersona_idx (idpersona), PRIMARY KEY(iddirectivo)) ENGINE = INNODB;
CREATE TABLE entrenador (identrenador INT AUTO_INCREMENT, idpersona INT NOT NULL, idequipo INT NOT NULL, activo TINYINT DEFAULT '0', INDEX idpersona_idx (idpersona), PRIMARY KEY(identrenador)) ENGINE = INNODB;
CREATE TABLE equipo (idequipo INT AUTO_INCREMENT, numjugadores INT NOT NULL, nombre VARCHAR(150) NOT NULL, identrenador INT NOT NULL, idclub INT NOT NULL, INDEX idclub_idx (idclub), PRIMARY KEY(idequipo)) ENGINE = INNODB;
CREATE TABLE goles (idgoles INT AUTO_INCREMENT, idpartido INT NOT NULL, idjugador INT NOT NULL, minuto INT, INDEX idjugador_idx (idjugador), INDEX idpartido_idx (idpartido), PRIMARY KEY(idgoles)) ENGINE = INNODB;
CREATE TABLE jornada (idjornada INT AUTO_INCREMENT, numjornada INT NOT NULL, fechajornada DATETIME NOT NULL, nombre TEXT NOT NULL, PRIMARY KEY(idjornada)) ENGINE = INNODB;
CREATE TABLE jugador (idjugador INT AUTO_INCREMENT, idpersona INT NOT NULL, goles INT DEFAULT '0', altura FLOAT(18, 2) DEFAULT 0.00, peso FLOAT(18, 2) DEFAULT 0.00, amarillas INT DEFAULT '0', rojas INT DEFAULT '0', INDEX idpersona_idx (idpersona), PRIMARY KEY(idjugador)) ENGINE = INNODB;
CREATE TABLE noticia (idnoticia INT AUTO_INCREMENT, titulo TEXT NOT NULL, cuerpo TEXT NOT NULL, idusuario BIGINT NOT NULL, imagen TEXT, descripcionimagen TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(idnoticia)) ENGINE = INNODB;
CREATE TABLE partido (idjornada INT NOT NULL, idequipolocal INT NOT NULL, idequipovisitante INT NOT NULL, goleslocal INT, golesvisitante INT, idcategoria INT NOT NULL, idpartido INT AUTO_INCREMENT, actualizado TINYINT NOT NULL, INDEX idcategoria_idx (idcategoria), INDEX idequipolocal_idx (idequipolocal), INDEX idequipovisitante_idx (idequipovisitante), INDEX idjornada_idx (idjornada), PRIMARY KEY(idpartido)) ENGINE = INNODB;
CREATE TABLE persona (idpersona INT AUTO_INCREMENT, nombre VARCHAR(150) NOT NULL, apellidos TEXT, edad INT, nif VARCHAR(8), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, foto TEXT, idclub INT NOT NULL, INDEX idclub_idx (idclub), PRIMARY KEY(idpersona)) ENGINE = INNODB;
CREATE TABLE temporada (idtemporada INT AUTO_INCREMENT, anio BIGINT NOT NULL, nombre VARCHAR(150) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(idtemporada)) ENGINE = INNODB;
CREATE TABLE usuario (idusuario INT AUTO_INCREMENT, idpersona INT NOT NULL, INDEX idpersona_idx (idpersona), PRIMARY KEY(idusuario)) ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE categoria ADD CONSTRAINT categoria_idtemporada_temporada_idtemporada FOREIGN KEY (idtemporada) REFERENCES temporada(idtemporada);
ALTER TABLE clasificacion ADD CONSTRAINT clasificacion_idjornada_jornada_idjornada FOREIGN KEY (idjornada) REFERENCES jornada(idjornada);
ALTER TABLE clasificacion ADD CONSTRAINT clasificacion_idequipo_equipo_idequipo FOREIGN KEY (idequipo) REFERENCES equipo(idequipo);
ALTER TABLE clasificacion ADD CONSTRAINT clasificacion_idcategoria_categoria_idcategoria FOREIGN KEY (idcategoria) REFERENCES categoria(idcategoria);
ALTER TABLE comentario ADD CONSTRAINT comentario_idnoticia_noticia_idnoticia FOREIGN KEY (idnoticia) REFERENCES noticia(idnoticia);
ALTER TABLE directivo ADD CONSTRAINT directivo_idpersona_persona_idpersona FOREIGN KEY (idpersona) REFERENCES persona(idpersona);
ALTER TABLE entrenador ADD CONSTRAINT entrenador_idpersona_persona_idpersona FOREIGN KEY (idpersona) REFERENCES persona(idpersona);
ALTER TABLE equipo ADD CONSTRAINT equipo_idclub_club_idclub FOREIGN KEY (idclub) REFERENCES club(idclub);
ALTER TABLE goles ADD CONSTRAINT goles_idpartido_partido_idpartido FOREIGN KEY (idpartido) REFERENCES partido(idpartido);
ALTER TABLE goles ADD CONSTRAINT goles_idjugador_jugador_idjugador FOREIGN KEY (idjugador) REFERENCES jugador(idjugador);
ALTER TABLE jugador ADD CONSTRAINT jugador_idpersona_persona_idpersona FOREIGN KEY (idpersona) REFERENCES persona(idpersona);
ALTER TABLE partido ADD CONSTRAINT partido_idjornada_jornada_idjornada FOREIGN KEY (idjornada) REFERENCES jornada(idjornada);
ALTER TABLE partido ADD CONSTRAINT partido_idequipovisitante_equipo_idequipo FOREIGN KEY (idequipovisitante) REFERENCES equipo(idequipo);
ALTER TABLE partido ADD CONSTRAINT partido_idequipolocal_equipo_idequipo FOREIGN KEY (idequipolocal) REFERENCES equipo(idequipo);
ALTER TABLE partido ADD CONSTRAINT partido_idcategoria_categoria_idcategoria FOREIGN KEY (idcategoria) REFERENCES categoria(idcategoria);
ALTER TABLE persona ADD CONSTRAINT persona_idclub_club_idclub FOREIGN KEY (idclub) REFERENCES club(idclub);
ALTER TABLE usuario ADD CONSTRAINT usuario_idpersona_persona_idpersona FOREIGN KEY (idpersona) REFERENCES persona(idpersona);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
